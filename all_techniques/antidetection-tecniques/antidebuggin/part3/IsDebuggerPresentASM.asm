.code

GetPEB proc
    mov rax, gs:[60h]            ; PEB
    ret
GetPEB endp

CheckDebugger proc
    xor eax, eax
    call GetPEB
    movzx eax, byte ptr [rax+2h] ; PEB->BeingDebugged
    ret                          ; Forgot ret...
CheckDebugger endp

end

;To create a .obj from .asm
;   ml64 /c /Fo"name.obj" name.asm